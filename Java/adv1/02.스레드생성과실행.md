# 2. ìŠ¤ë ˆë“œ ìƒì„±ê³¼ ì‹¤í–‰

- [ìŠ¤ë ˆë“œ ì‹œì‘1](#ìŠ¤ë ˆë“œ-ì‹œì‘1)
- [ìŠ¤ë ˆë“œ ì‹œì‘2](#ìŠ¤ë ˆë“œ-ì‹œì‘2)
- [ë°ëª¬ ìŠ¤ë ˆë“œ](#ë°ëª¬-ìŠ¤ë ˆë“œ)
- [ìŠ¤ë ˆë“œ ìƒì„± - Runnable](#ìŠ¤ë ˆë“œ-ìƒì„±---runnable)
- [ë¡œê±° ë§Œë“¤ê¸°](#ë¡œê±°-ë§Œë“¤ê¸°)
- [ì—¬ëŸ¬ ìŠ¤ë ˆë“œ ë§Œë“¤ê¸°](#ì—¬ëŸ¬-ìŠ¤ë ˆë“œ-ë§Œë“¤ê¸°)
- [Runnableì„ ë§Œë“œëŠ” ë‹¤ì–‘í•œ ë°©ë²•](#runnableì„-ë§Œë“œëŠ”-ë‹¤ì–‘í•œ-ë°©ë²•)
- [ë¬¸ì œì™€ í’€ì´](#ë¬¸ì œì™€-í’€ì´)
- [ì •ë¦¬](#ì •ë¦¬)

## ìŠ¤ë ˆë“œ ì‹œì‘1
ìŠ¤ë ˆë“œë¥¼ ì œëŒ€ë¡œ ì´í•´í•˜ë ¤ë©´ ìë°” ë©”ëª¨ë¦¬ êµ¬ì¡°ë¥¼ í™•ì‹¤íˆ ì´í•´í•˜ê³  ìˆì–´ì•¼ í•œë‹¤.
ìŠ¤ë ˆë“œë¥¼ ì‹œì‘í•˜ê¸° ì „ì— ì ê¹ ìë°” ë©”ëª¨ë¦¬ êµ¬ì¡°ë¥¼ ë³µìŠµí•˜ì.

### ìë°” ë©”ëª¨ë¦¬ êµ¬ì¡° ë³µìŠµ
#### ìë°” ë©”ëª¨ë¦¬ êµ¬ì¡°

![](https://github.com/dididiri1/TIL/blob/main/Java/adv1/images/02_01.png?raw=true)

- ë©”ì„œë“œ ì˜ì—­(Method Area): ë©”ì„œë“œ ì˜ì—­ì€ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ëŠ”ë° í•„ìš”í•œ ê³µí†µ ë°ì´í„°ë¥¼ ê´€ë¦¬í•œë‹¤. ì´ ì˜ì—­ì€ í”„ë¡œê·¸ë¨ì˜ ëª¨ë“  ì˜ì—­ì—ì„œ ê³µìœ í•œë‹¤.
  - í´ë˜ìŠ¤ ì •ë³´: í´ë˜ìŠ¤ì˜ ì‹¤í–‰ ì½”ë“œ(ë°”ì´íŠ¸ ì½”ë“œ), í•„ë“œ, ë©”ì„œë“œì™€ ìƒì„±ì ì½”ë“œë“± ëª¨ë“  ì‹¤í–‰ ì½”ë“œê°€ ì¡´ì¬í•œë‹¤.
  - static ì˜ì—­: static ë³€ìˆ˜ë“¤ì„ ë³´ê´€í•œë‹¤.
  - ëŸ°íƒ€ì„ ìƒìˆ˜ í’€: í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ëŠ”ë° í•„ìš”í•œ ê³µí†µ ë¦¬í„°ëŸ´ ìƒìˆ˜ë¥¼ ë³´ê´€í•œë‹¤.
- ìŠ¤íƒ ì˜ì—­(Stack Area): ìë°” ì‹¤í–‰ ì‹œ, í•˜ë‚˜ì˜ ì‹¤í–‰ ìŠ¤íƒì´ ìƒì„±ëœë‹¤. ê° ìŠ¤íƒ í”„ë ˆì„ì€ ì§€ì—­ ë³€ìˆ˜, ì¤‘ê°„ ì—°ì‚° ê²°ê³¼, ë©”ì„œë“œ í˜¸ì¶œ ì •ë³´ ë“±ì„ í¬í•¨í•œë‹¤.
  - ìŠ¤íƒ í”„ë ˆì„: ìŠ¤íƒ ì˜ì—­ì— ìŒ“ì´ëŠ” ë„¤ëª¨ ë°•ìŠ¤ê°€ í•˜ë‚˜ì˜ ìŠ¤íƒ í”„ë ˆì„ì´ë‹¤. ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œ ë§ˆë‹¤ í•˜ë‚˜ì˜ ìŠ¤íƒ í”„ë ˆì„ì´ ìŒ“ì´ê³ , 
    ë©”ì„œë“œê°€ ì¢…ë£Œë˜ë©´ í•´ë‹¹ ìŠ¤íƒ í”„ë ˆì„ì´ ì œê±°ëœë‹¤.
- í™ ì˜ì—­(Heap Area): ê°ì²´(ì¸ìŠ¤í„´ìŠ¤)ì™€ ë°°ì—´ì´ ìƒì„±ë˜ëŠ” ì˜ì—­ì´ë‹¤. ê°€ë¹„ì§€ ì»¬ë ‰ì…˜(GC)ì´ ì´ë£¨ì–´ì§€ëŠ” ì£¼ìš” ì˜ì—­ì´ë©°, 
  ë” ì´ìƒ ì°¸ì¡°ë˜ì§€ ì•ŠëŠ” ê°ì²´ëŠ” GCì— ì˜í•´ ì œê±°ëœë‹¤.

> ğŸ’¡**ì°¸ê³ **: ìŠ¤íƒ ì˜ì—­ì€ ë” ì •í™•íˆëŠ” ê° ìŠ¤ë ˆë“œë³„ë¡œ í•˜ë‚˜ì˜ ì‹¤í–‰ ìŠ¤íƒì´ ìƒì„±ëœë‹¤. ë”°ë¼ì„œ ìŠ¤ë ˆë“œ ìˆ˜ ë§Œí¼ ìŠ¤íƒì´ ìƒì„± ëœë‹¤. 
> ì§€ê¸ˆì€ ìŠ¤ë ˆë“œë¥¼ 1ê°œë§Œ ì‚¬ìš©í•˜ë¯€ë¡œ ìŠ¤íƒë„ í•˜ë‚˜ì´ë‹¤. ì´í›„ ìŠ¤ë ˆë“œë¥¼ ì¶”ê°€í•  ê²ƒì¸ë°, ê·¸ëŸ¬ë©´ ìŠ¤íƒë„ ìŠ¤ë ˆë“œ ìˆ˜ ë§Œí¼ ì¦ê°€í•œë‹¤.

### ìŠ¤ë ˆë“œ ìƒì„±
ìŠ¤ë ˆë“œë¥¼ ì§ì ‘ ë§Œë“¤ì–´ë³´ì. ê·¸ë˜ì„œ í•´ë‹¹ ìŠ¤ë ˆë“œì—ì„œ ë³„ë„ì˜ ë¡œì§ì„ ìˆ˜í–‰í•´ë³´ì.
ìŠ¤ë ˆë“œë¥¼ ë§Œë“¤ ë•ŒëŠ” Thread í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ëŠ” ë°©ë²•ê³¼ Runnable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤.
ë¨¼ì € Thread í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ì•„ì„œ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•´ë³´ì.

### ìŠ¤ë ˆë“œ ìƒì„± - Thread ìƒì†
ìë°”ëŠ” ë§ì€ ê²ƒì„ ê°ì²´ë¡œ ë‹¤ë£¬ë‹¤. ìë°”ê°€ ì˜ˆì™¸ë¥¼ ê°ì²´ë¡œ ë‹¤ë£¨ë“¯ì´, ìŠ¤ë ˆë“œë„ ê°ì²´ë¡œ ë‹¤ë£¬ë‹¤.
ìŠ¤ë ˆë“œê°€ í•„ìš”í•˜ë©´, ìŠ¤ë ˆë“œ ê°ì²´ë¥¼ ìƒì„±í•´ì„œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

```
package thread.start;

public class HelloThread extends Thread {
    @Override
    public void run() {
        System.out.println(Thread.currentThread().getName() + ": run()");
    }
}
```
- Thread í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ê³ , ìŠ¤ë ˆë“œê°€ ì‹¤í–‰í•  ì½”ë“œë¥¼ run() ë©”ì„œë“œì— ì¬ì •ì˜í•œë‹¤.
- Thread.currentThread() ë¥¼ í˜¸ì¶œí•˜ë©´ í•´ë‹¹ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ìŠ¤ë ˆë“œ ê°ì²´ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
- Thread.currentThread().getName() : ì‹¤í–‰ ì¤‘ì¸ ìŠ¤ë ˆë“œì˜ ì´ë¦„ì„ ì¡°íšŒí•œë‹¤.

```
package thread.start;

public class HelloThreadMain {
    public static void main(String[] args) {
        System.out.println(Thread.currentThread().getName() + ": main() start");

        HelloThread helloThread = new HelloThread();

        System.out.println(Thread.currentThread().getName() + ": start() í˜¸ì¶œ ì „");
        helloThread.start();
        System.out.println(Thread.currentThread().getName() + ": start() í˜¸ì¶œ í›„");

        System.out.println(Thread.currentThread().getName() + ": main() end");
    }
}
```
- ì•ì„œ ë§Œë“  HelloThread ìŠ¤ë ˆë“œ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  start() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.
- start() ë©”ì„œë“œëŠ” ìŠ¤ë ˆë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ì•„ì£¼ íŠ¹ë³„í•œ ë©”ì„œë“œì´ë‹¤.
- start() ë¥¼ í˜¸ì¶œí•˜ë©´ HelloThread ìŠ¤ë ˆë“œê°€ run() ë©”ì„œë“œë¥¼ ì‹¤í–‰í•œë‹¤.

**ì£¼ì˜!** run() ë©”ì„œë“œê°€ ì•„ë‹ˆë¼ ë°˜ë“œì‹œ start() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì•¼ í•œë‹¤. ê·¸ë˜ì•¼ ë³„ë„ì˜ ìŠ¤ë ˆë“œì—ì„œ run() ì½”ë“œê°€ ì‹¤í–‰ëœë‹¤.

#### ì‹¤í–‰ ê²°ê³¼
```
main: main() start
main: start() í˜¸ì¶œ ì „
main: start() í˜¸ì¶œ í›„
Thread-0: run()
main: main() end
```
- ì°¸ê³ ë¡œ ì‹¤í–‰ ê²°ê³¼ëŠ” ìŠ¤ë ˆë“œì˜ ì‹¤í–‰ ìˆœì„œì— ë”°ë¼ ì•½ê°„ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤. ì´ ë¶€ë¶„ì€ ë°”ë¡œ ë’¤ì—ì„œ ì„¤ëª…í•œë‹¤.

![](https://github.com/dididiri1/TIL/blob/main/Java/adv1/images/02_02.png?raw=true)
ì‹¤í–‰ ê²°ê³¼ë¥¼ ë³´ë©´ main() ë©”ì„œë“œëŠ” main ì´ë¼ëŠ” ì´ë¦„ì˜ ìŠ¤ë ˆë“œê°€ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. í”„ë¡œì„¸ìŠ¤ê°€ ì‘ë™í•˜ ë ¤ë©´ ìŠ¤ë ˆë“œê°€ ìµœì†Œí•œ í•˜ë‚˜ëŠ” ìˆì–´ì•¼ í•œë‹¤. 
ê·¸ë˜ì•¼ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤. ìë°”ëŠ” ì‹¤í–‰ ì‹œì ì— main ì´ë¼ëŠ” ì´ë¦„ì˜ ìŠ¤ë ˆë“œë¥¼ ë§Œë“¤ê³  í”„ë¡œê·¸ë¨ì˜ ì‹œì‘ì ì¸ main() ë©”ì„œë“œë¥¼ ì‹¤í–‰í•œë‹¤.

![](https://github.com/dididiri1/TIL/blob/main/Java/adv1/images/02_03.png?raw=true)

- HelloThread ìŠ¤ë ˆë“œ ê°ì²´ë¥¼ ìƒì„±í•œ ë‹¤ìŒì— start() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ìë°”ëŠ” ìŠ¤ë ˆë“œë¥¼ ìœ„í•œ ë³„ë„ì˜ ìŠ¤íƒ ê³µê°„ì„ í• ë‹¹í•œë‹¤.
- ìŠ¤ë ˆë“œ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ë°˜ë“œì‹œ start() ë¥¼ í˜¸ì¶œí•´ì•¼ ìŠ¤íƒ ê³µê°„ì„ í• ë‹¹ ë°›ê³  ìŠ¤ë ˆë“œê°€ ì‘ë™í•œë‹¤.
- ìŠ¤ë ˆë“œì— ì´ë¦„ì„ ì£¼ì§€ ì•Šìœ¼ë©´ ìë°”ëŠ” ìŠ¤ë ˆë“œì— Thread-0 , Thread-1 ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ì„ ë¶€ì—¬í•œë‹¤.
- ìƒˆë¡œìš´ Thread-0 ìŠ¤ë ˆë“œê°€ ì‚¬ìš©í•  ì „ìš© ìŠ¤íƒ ê³µê°„ì´ ë§ˆë ¨ë˜ì—ˆë‹¤.
- Thread-0 ìŠ¤ë ˆë“œëŠ” run() ë©”ì„œë“œì˜ ìŠ¤íƒ í”„ë ˆì„ì„ ìŠ¤íƒì— ì˜¬ë¦¬ë©´ì„œ run() ë©”ì„œë“œë¥¼ ì‹œì‘í•œë‹¤.

#### ë©”ì„œë“œë¥¼ ì‹¤í–‰í•˜ë©´ ìŠ¤íƒ ìœ„ì— ìŠ¤íƒ í”„ë ˆì„ì´ ìŒ“ì¸ë‹¤
- main ìŠ¤ë ˆë“œëŠ” main() ë©”ì„œë“œì˜ ìŠ¤íƒ í”„ë ˆì„ì„ ìŠ¤íƒì— ì˜¬ë¦¬ë©´ì„œ ì‹œì‘í•œë‹¤.
- ì§ì ‘ ë§Œë“œëŠ” ìŠ¤ë ˆë“œëŠ” run() ë©”ì„œë“œì˜ ìŠ¤íƒ í”„ë ˆì„ì„ ìŠ¤íƒì— ì˜¬ë¦¬ë©´ì„œ ì‹œì‘í•œë‹¤.

ì‹¤í–‰ ê²°ê³¼ë¥¼ ë³´ë©´ Thread-0 ìŠ¤ë ˆë“œê°€ run() ë©”ì„œë“œë¥¼ ì‹¤í–‰í•œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

![](https://github.com/dididiri1/TIL/blob/main/Java/adv1/images/02_04.png?raw=true)
- main ìŠ¤ë ˆë“œê°€ HelloThread ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•œë‹¤. ì´ë•Œ ìŠ¤ë ˆë“œì— ì´ë¦„ì„ ë¶€ì—¬í•˜ì§€ ì•Šìœ¼ë©´ ìë°”ê°€ Thread-0 , Thread-1 ê³¼ ê°™ì€ ì„ì˜ì˜ 
  ì´ë¦„ì„ ë¶€ì—¬í•œë‹¤.
- start() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´, Thread-0 ìŠ¤ë ˆë“œê°€ ì‹œì‘ë˜ë©´ì„œ Thread-0 ìŠ¤ë ˆë“œê°€ run() ë©”ì„œë“œë¥¼ í˜¸ì¶œ í•œë‹¤.
- ì—¬ê¸°ì„œ í•µì‹¬ì€ main ìŠ¤ë ˆë“œê°€ run() ë©”ì„œë“œë¥¼ ì‹¤í–‰í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ Thread-0 ìŠ¤ë ˆë“œê°€ run() ë©”ì„œë“œë¥¼ ì‹¤í–‰í•œë‹¤ëŠ” ì ì´ë‹¤.
- main ìŠ¤ë ˆë“œëŠ” ë‹¨ì§€ start() ë©”ì„œë“œë¥¼ í†µí•´ Thread-0 ìŠ¤ë ˆë“œì—ê²Œ ì‹¤í–‰ì„ ì§€ì‹œí•  ë¿ì´ë‹¤. ë‹¤ì‹œ ê°•ì¡°í•˜ì§€ë§Œ main ìŠ¤ë ˆë“œê°€ run() ì„ í˜¸ì¶œí•˜ëŠ” 
  ê²ƒì´ ì•„ë‹ˆë‹¤! main ìŠ¤ë ˆë“œëŠ” ë‹¤ë¥¸ ìŠ¤ë ˆë“œì—ê²Œ ì¼ì„ ì‹œì‘í•˜ë¼ê³  ì§€ì‹œë§Œ í•˜ê³ , ë°”ë¡œ start() ë©”ì„œë“œë¥¼ ë¹ ì ¸ë‚˜ì˜¨ë‹¤.
- ì´ì œ main ìŠ¤ë ˆë“œì™€ Thread-0 ìŠ¤ë ˆë“œëŠ” ë™ì‹œì— ì‹¤í–‰ëœë‹¤.
- main ìŠ¤ë ˆë“œ ì…ì¥ì—ì„œ ë³´ë©´ ê·¸ë¦¼ì˜ 1, 2, 3ë²ˆ ì½”ë“œë¥¼ ë©ˆì¶”ì§€ ì•Šê³  ê³„ì† ìˆ˜í–‰í•œë‹¤. ê·¸ë¦¬ê³  run() ë©”ì„œë“œëŠ” main ì´ ì•„ë‹Œ ë³„ë„ì˜ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰ëœë‹¤.

#### ìŠ¤ë ˆë“œ ê°„ ì‹¤í–‰ ìˆœì„œëŠ” ë³´ì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.
ìŠ¤ë ˆë“œëŠ” ë™ì‹œì— ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— ìŠ¤ë ˆë“œ ê°„ì— ì‹¤í–‰ ìˆœì„œëŠ” ì–¼ë§ˆë“ ì§€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ë‹¤ìŒê³¼ ê°™ì´ ë‹¤ì–‘í•œ ì‹¤í–‰
ê²°ê³¼ê°€ ë‚˜ì˜¬ ìˆ˜ ìˆë‹¤.

main ìŠ¤ë ˆë“œê°€ ë¹¨ë¦¬ ì‹¤í–‰ëœ ê²½ìš°
```
main: main() start
main: start() í˜¸ì¶œ ì „
main: start() í˜¸ì¶œ í›„
main: main() end
Thread-0: run()
```
- main ìŠ¤ë ˆë“œê°€ ëª¨ë“  ë¡œì§ì„ ë‹¤ ìˆ˜í–‰í•œ ë‹¤ìŒì— Thread-0 ê°€ ìˆ˜í–‰ëœë‹¤.

Thread-0 ìŠ¤ë ˆë“œê°€ ë¹¨ë¦¬ ì‹¤í–‰ëœ ê²½ìš°
```
main: main() start
main: start() í˜¸ì¶œ ì „
Thread-0: run()
main: start() í˜¸ì¶œ í›„
main: main() end
```
- Thread-0 start() ì´í›„ Thread-0 ê°€ ë¨¼ì € ìˆ˜í–‰ë˜ê³ , main ì´ ìˆ˜í–‰ëœë‹¤.

main ìŠ¤ë ˆë“œ ì‹¤í–‰ ì¤‘ê°„ì— Thread-0 ìŠ¤ë ˆë“œê°€ ì‹¤í–‰ëœ ê²½ìš°
```
main: main() thread.start
main: start() í˜¸ì¶œ ì „
main: start() í˜¸ì¶œ í›„
Thread-0: run()
main: main() end
```
- main ìŠ¤ë ˆë“œê°€ "start() í˜¸ì¶œ í›„"ë¥¼ ì¶œë ¥í•œ ë‹¤ìŒì— Thread-0 ìŠ¤ë ˆë“œ run() ì„ ì¶œë ¥í•œë‹¤.

ìŠ¤ë ˆë“œ ê°„ì˜ ì‹¤í–‰ ìˆœì„œëŠ” ì–¼ë§ˆë“ ì§€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆë‹¤.
CPU ì½”ì–´ê°€ 2ê°œì—¬ì„œ ë¬¼ë¦¬ì ìœ¼ë¡œ ì •ë§ ë™ì‹œì— ì‹¤í–‰ë  ìˆ˜ë„ ìˆê³ , í•˜ë‚˜ì˜ CPU ì½”ì–´ì— ì‹œê°„ì„ ë‚˜ëˆ„ì–´ ì‹¤í–‰ë  ìˆ˜ë„ ìˆë‹¤.
ê·¸ë¦¬ê³  í•œ ìŠ¤ë ˆë“œê°€ ì–¼ë§ˆë‚˜ ì˜¤ëœê¸°ê°„ ì‹¤í–‰ë˜ëŠ”ì§€ë„ ë³´ì¥í•˜ì§€ ì•ŠëŠ”ë‹¤. í•œ ìŠ¤ë ˆë“œê°€ ë¨¼ì € ë‹¤ ìˆ˜í–‰ëœ ë‹¤ìŒì— ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ ìˆ˜í–‰ë  ìˆ˜ë„ ìˆê³ , 
ë‘˜ì´ ì™„ì „íˆ ë²ˆê°ˆì•„ ê°€ë©´ì„œ ìˆ˜í–‰ë˜ëŠ” ê²½ìš°ë„ ìˆë‹¤.

ìŠ¤ë ˆë“œëŠ” ìˆœì„œì™€ ì‹¤í–‰ ê¸°ê°„ì„ ëª¨ë‘ ë³´ì¥í•˜ì§€ ì•ŠëŠ”ë‹¤. ì´ê²ƒì´ ë°”ë¡œ ë©€í‹°ìŠ¤ë ˆë“œë‹¤!

## ìŠ¤ë ˆë“œ ì‹œì‘2
### start() vs run()
ìŠ¤ë ˆë“œì˜ start() ëŒ€ì‹ ì— ì¬ì •ì˜í•œ run() ë©”ì„œë“œë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ?
```
package thread.start;

public class BadThreadMain {
    public static void main(String[] args) {
        System.out.println(Thread.currentThread().getName() + ": main() start");

        HelloThread helloThread = new HelloThread();

        System.out.println(Thread.currentThread().getName() + ": run() í˜¸ì¶œ ì „");
        helloThread.run(); // run() ì§ì ‘ ì‹¤í–‰
        System.out.println(Thread.currentThread().getName() + ": run() í˜¸ì¶œ í›„");

        System.out.println(Thread.currentThread().getName() + ": main() end");
    }
}
```
- helloThread.run() : start() ë¥¼ í˜¸ì¶œí•´ì•¼ í•˜ì§€ë§Œ ì—¬ê¸°ì„œëŠ” ë¬¸ì œë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ run() ì„ ì§ì ‘ í˜¸ì¶œí•œë‹¤.

#### ì‹¤í–‰ ê²°ê³¼
```
main: main() start
main: run() í˜¸ì¶œ ì „
main: run()
main: run() í˜¸ì¶œ í›„
main: main() end
```

![](https://github.com/dididiri1/TIL/blob/main/Java/adv1/images/02_05.png?raw=true)

- ì‹¤í–‰ ê²°ê³¼ë¥¼ ì˜ ë³´ë©´ ë³„ë„ì˜ ìŠ¤ë ˆë“œê°€ run() ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, main ìŠ¤ë ˆë“œê°€ run() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
- ìë°”ë¥¼ ì²˜ìŒ ì‹¤í–‰í•˜ë©´ main ìŠ¤ë ˆë“œê°€ main() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ì„œ ì‹œì‘í•œë‹¤.
- main ìŠ¤ë ˆë“œëŠ” HelloThread ì¸ìŠ¤í„´ìŠ¤ì— ìˆëŠ” run() ì´ë¼ëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.
- main ìŠ¤ë ˆë“œê°€ run() ë©”ì„œë“œë¥¼ ì‹¤í–‰í–ˆê¸° ë•Œë¬¸ì— main ìŠ¤ë ˆë“œê°€ ì‚¬ìš©í•˜ëŠ” ìŠ¤íƒìœ„ì— run() ìŠ¤íƒ í”„ë ˆì„ì´ ì˜¬ë¼ê°„ë‹¤.

![](https://github.com/dididiri1/TIL/blob/main/Java/adv1/images/02_06.png?raw=true)

ê²°ê³¼ì ìœ¼ë¡œ main ìŠ¤ë ˆë“œì—ì„œ ëª¨ë“  ê²ƒì„ ì²˜ë¦¬í•œ ê²ƒì´ ëœë‹¤.

ìŠ¤ë ˆë“œì˜ start() ë©”ì„œë“œëŠ” ìŠ¤ë ˆë“œì— ìŠ¤íƒ ê³µê°„ì„ í• ë‹¹í•˜ë©´ì„œ ìŠ¤ë ˆë“œë¥¼ ì‹œì‘í•˜ëŠ” ì•„ì£¼ íŠ¹ë³„í•œ ë©”ì„œë“œì´ë‹¤. ê·¸ë¦¬ê³ 
í•´ë‹¹ ìŠ¤ë ˆë“œì—ì„œ run() ë©”ì„œë“œë¥¼ ì‹¤í–‰í•œë‹¤. ë”°ë¼ì„œ main ìŠ¤ë ˆë“œê°€ ì•„ë‹Œ ë³„ë„ì˜ ìŠ¤ë ˆë“œì—ì„œ ì¬ì •ì˜í•œ run() ë©”ì„œë“œë¥¼ ì‹¤í–‰í•˜ë ¤ë©´, 
ë°˜ë“œì‹œ start() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì•¼ í•œë‹¤.

> ğŸ’¡**ì°¸ê³ **: ìŠ¤ë ˆë“œì™€ ë©”ëª¨ë¦¬ êµ¬ì¡°ì— ëŒ€í•œ ë¶€ë¶„ì€ ê°•ì˜ë¥¼ ì§„í–‰í•˜ë©´ì„œ ì ì  ë” ìì„¸íˆ ì„¤ëª…í•œë‹¤.

### ë°ëª¬ ìŠ¤ë ˆë“œ
#### ë°ëª¬ ìŠ¤ë ˆë“œ
ìŠ¤ë ˆë“œëŠ” ì‚¬ìš©ì(user) ìŠ¤ë ˆë“œì™€ ë°ëª¬(daemon) ìŠ¤ë ˆë“œ 2ê°€ì§€ ì¢…ë¥˜ë¡œ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤.

#### ì‚¬ìš©ì ìŠ¤ë ˆë“œ(non-daemon ìŠ¤ë ˆë“œ)
- í”„ë¡œê·¸ë¨ì˜ ì£¼ìš” ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.
- ì‘ì—…ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ì‹¤í–‰ëœë‹¤.
- ëª¨ë“  user ìŠ¤ë ˆë“œê°€ ì¢…ë£Œë˜ë©´ JVMë„ ì¢…ë£Œëœë‹¤.

#### ë°ëª¬ ìŠ¤ë ˆë“œ
- ë°±ê·¸ë¼ìš´ë“œì—ì„œ ë³´ì¡°ì ì¸ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.
- ëª¨ë“  user ìŠ¤ë ˆë“œê°€ ì¢…ë£Œë˜ë©´ ë°ëª¬ ìŠ¤ë ˆë“œëŠ” ìë™ìœ¼ë¡œ ì¢…ë£Œëœë‹¤.

JVMì€ ë°ëª¬ ìŠ¤ë ˆë“œì˜ ì‹¤í–‰ ì™„ë£Œë¥¼ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ì¢…ë£Œëœë‹¤. ë°ëª¬ ìŠ¤ë ˆë“œê°€ ì•„ë‹Œ ëª¨ë“  ìŠ¤ë ˆë“œê°€ ì¢…ë£Œë˜ë©´, ìë°” í”„ë¡œê·¸ë¨ë„ ì¢…ë£Œëœë‹¤.

> ğŸ’¡**ìš©ì–´ - ë°ëª¬**: ê·¸ë¦¬ìŠ¤ ì‹ í™”ì—ì„œ ë°ëª¬ì€ ì‹ ê³¼ ì¸ê°„ ì‚¬ì´ì˜ ì¤‘ê°„ì  ì¡´ì¬ë¡œ, ë³´ì´ì§€ ì•Šê²Œ í™œë™í•˜ë©° ì¼ìƒì ì¸ ì¼ë“¤ì„ ë„ì™”ë‹¤.
> ì´ëŸ° ì˜ë¯¸ë¡œ ì»´í“¨í„° ê³¼í•™ì—ì„œëŠ” ì‚¬ìš©ìì—ê²Œ ì§ì ‘ì ìœ¼ë¡œ ë³´ì´ì§€ ì•Šìœ¼ë©´ì„œ ì‹œìŠ¤í…œì˜ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì„ ë°ëª¬ ìŠ¤ë ˆë“œ, ë°ëª¬ í”„ë¡œì„¸ìŠ¤ë¼ í•œë‹¤. 
> ì˜ˆë¥¼ ë“¤ì–´ì„œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” íŒŒì¼ì´ë‚˜ ë©”ëª¨ë¦¬ë¥¼ ì •ë¦¬í•˜ëŠ” ì‘ì—… ë“¤ì´ ìˆë‹¤.

```
package thread.start;

public class DaemonThreadMain {
    public static void main(String[] args) {
        System.out.println(Thread.currentThread().getName() + ": main() start");

        DaemonThread daemonThread = new DaemonThread();
        daemonThread.setDaemon(true); // ë°ëª¬ ìŠ¤ë ˆë“œ ì—¬ë¶€
        daemonThread.start();

        System.out.println(Thread.currentThread().getName() + ": main() end");
    }

    static class DaemonThread extends Thread {
        @Override
        public void run() {
            System.out.println(Thread.currentThread().getName() + ": run() start");
            try {
                Thread.sleep(10000); // 10ì´ˆê°„ ì‹¤í–‰
            } catch (InterruptedException e) {
                throw new RuntimeException(e);
            }
            System.out.println(Thread.currentThread().getName() + ": run() end");
        }
    }
}
```
- setDaemon(true) : ë°ëª¬ ìŠ¤ë ˆë“œë¡œ ì„¤ì •í•œë‹¤.
- ë°ëª¬ ìŠ¤ë ˆë“œ ì—¬ë¶€ëŠ” start() ì‹¤í–‰ ì „ì— ê²°ì •í•´ì•¼ í•œë‹¤. ì´í›„ì—ëŠ” ë³€ê²½ë˜ì§€ ì•ŠëŠ”ë‹¤.
- ê¸°ë³¸ ê°’ì€ false ì´ë‹¤. (user ìŠ¤ë ˆë“œê°€ ê¸°ë³¸)

> ğŸ’¡**ì°¸ê³ **: run() ë©”ì„œë“œ ì•ˆì—ì„œ Thread.sleep() ë¥¼ í˜¸ì¶œí•  ë•Œ ì²´í¬ ì˜ˆì™¸ì¸ InterruptedException ì„ ë°–ìœ¼ë¡œ ë˜ì§ˆ ìˆ˜ ì—†ê³  ë°˜ë“œì‹œ ì¡ì•„ì•¼ í•œë‹¤. 
> run() ë©”ì„œë“œëŠ” ì²´í¬ ì˜ˆì™¸ë¥¼ ë°–ìœ¼ë¡œ ë˜ì§ˆ ìˆ˜ ì—†ëŠ”ë°, ì´ ë¶€ë¶„ì€ ë’¤ì—ì„œ ì„¤ëª…í•œë‹¤.

#### ì‹¤í–‰ ê²°ê³¼ - setDaemon(true)
```
main: main() start
main: main() end
Thread-0: run() start
```
- setDaemon(true) ë¡œ ì„¤ì •í•´ë³´ì.
- Thread-0 ëŠ” ë°ëª¬ ìŠ¤ë ˆë“œë¡œ ì„¤ì •ëœë‹¤.
- ìœ ì¼í•œ user ìŠ¤ë ˆë“œì¸ main ìŠ¤ë ˆë“œê°€ ì¢…ë£Œë˜ë©´ì„œ ìë°” í”„ë¡œê·¸ë¨ë„ ì¢…ë£Œëœë‹¤.
- ë”°ë¼ì„œ run() end ê°€ ì¶œë ¥ë˜ê¸° ì „ì— í”„ë¡œê·¸ë¨ì´ ì¢…ë£Œëœë‹¤.

#### ì‹¤í–‰ ê²°ê³¼ - setDaemon(false)
```
main: main() start
main: main() end
Thread-0: run() start
Thread-0: run() end
```

- setDaemon(false) ë¡œ ì„¤ì •í•´ë³´ì.
- Thread-0 ëŠ” user ìŠ¤ë ˆë“œë¡œ ì„¤ì •ëœë‹¤.
- main ìŠ¤ë ˆë“œê°€ ì¢…ë£Œë˜ì–´ë„, user ìŠ¤ë ˆë“œì¸ Thread-0 ê°€ ì¢…ë£Œë  ë•Œ ê¹Œì§€ ìë°” í”„ë¡œê·¸ë¨ì„ ì¢…ë£Œë˜ì§€ ì•ŠëŠ”ë‹¤.
- ë”°ë¼ì„œ Thread-0: run() end ê°€ ì¶œë ¥ëœë‹¤.
- user ìŠ¤ë ˆë“œì¸ main ìŠ¤ë ˆë“œì™€ Thread-0 ìŠ¤ë ˆë“œê°€ ëª¨ë‘ ì¢…ë£Œë˜ë©´ì„œ ìë°” í”„ë¡œê·¸ë¨ë„ ì¢…ë£Œëœë‹¤

## ìŠ¤ë ˆë“œ ìƒì„± - Runnable
ìŠ¤ë ˆë“œë¥¼ ë§Œë“¤ ë•ŒëŠ” Thread í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ëŠ” ë°©ë²•ê³¼ Runnable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤.
ì•ì„œ Thread í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ì•„ì„œ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•´ë³´ì•˜ë‹¤.
ì´ë²ˆì—ëŠ” Runnable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•´ë³´ì.

#### Runnable ì¸í„°í˜ì´ìŠ¤
```
package java.lang;

public interface Runnable {
    void run();
}
```
- ìë°”ê°€ ì œê³µí•˜ëŠ” ìŠ¤ë ˆë“œ ì‹¤í–‰ìš© ì¸í„°í˜ì´ìŠ¤
```
package thread.start;

public class HelloRunnable implements Runnable {
    @Override
    public void run() {
        System.out.println(Thread.currentThread().getName() + ": run()");
    }
}
```
```
package thread.start;

public class HelloRunnableMain {
    public static void main(String[] args) {
        System.out.println(Thread.currentThread().getName() + ": main() start");
        HelloRunnable runnable = new HelloRunnable();
        Thread thread = new Thread(runnable);
        thread.start();
        System.out.println(Thread.currentThread().getName() + ": main() end");
    }
}
```

#### ì‹¤í–‰ ê²°ê³¼
```
main: main() start
main: main() end
Thread-0: run()
```
ì‹¤í–‰ ê²°ê³¼ëŠ” ê¸°ì¡´ê³¼ ê°™ë‹¤. ì°¨ì´ê°€ ìˆë‹¤ë©´, ìŠ¤ë ˆë“œì™€ í•´ë‹¹ ìŠ¤ë ˆë“œê°€ ì‹¤í–‰í•  ì‘ì—…ì´ ì„œë¡œ ë¶„ë¦¬ë˜ì–´ ìˆë‹¤ëŠ” ì ì´ë‹¤.
ìŠ¤ë ˆë“œ ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ, ì‹¤í–‰í•  ì‘ì—…ì„ ìƒì„±ìë¡œ ì „ë‹¬í•˜ë©´ ëœë‹¤.

### Thread ìƒì† vs Runnable êµ¬í˜„
ìŠ¤ë ˆë“œ ì‚¬ìš©í•  ë•ŒëŠ” Thread ë¥¼ ìƒì† ë°›ëŠ” ë°©ë²•ë³´ë‹¤ Runnable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•˜ì.
ë‘ ë°©ì‹ì´ ì„œë¡œ ì¥ë‹¨ì ì´ ìˆì§€ë§Œ, ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•  ë•ŒëŠ” Thread í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ëŠ” ë°©ì‹ë³´ë‹¤ Runnable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ì‹ì´ ë” ë‚˜ì€ ì„ íƒì´ë‹¤.

#### Thread í´ë˜ìŠ¤ ìƒì† ë°©ì‹
**ì¥ì **
- ê°„ë‹¨í•œ êµ¬í˜„: Thread í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ run() ë©”ì„œë“œë§Œ ì¬ì •ì˜í•˜ë©´ ëœë‹¤.
**ë‹¨ì **
- ìƒì†ì˜ ì œí•œ: ìë°”ëŠ” ë‹¨ì¼ ìƒì†ë§Œì„ í—ˆìš©í•˜ë¯€ë¡œ ì´ë¯¸ ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ê³  ìˆëŠ” ê²½ìš° Thread í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ì„ ìˆ˜ ì—†ë‹¤.
- ìœ ì—°ì„± ë¶€ì¡±: ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ë¹„í•´ ìœ ì—°ì„±ì´ ë–¨ì–´ì§„ë‹¤.

#### Runnable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„ ë°©ì‹
**ì¥ì **
- ìƒì†ì˜ ììœ ë¡œì›€: Runnable ì¸í„°í˜ì´ìŠ¤ ë°©ì‹ì€ ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ë„ ë¬¸ì œì—†ì´ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.
- ì½”ë“œì˜ ë¶„ë¦¬: ìŠ¤ë ˆë“œì™€ ì‹¤í–‰í•  ì‘ì—…ì„ ë¶„ë¦¬í•˜ì—¬ ì½”ë“œì˜ ê°€ë…ì„±ì„ ë†’ì¼ ìˆ˜ ìˆë‹¤.
- ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì¼í•œ Runnable ê°ì²´ë¥¼ ê³µìœ í•  ìˆ˜ ìˆì–´ ìì› ê´€ë¦¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ í•  ìˆ˜ ìˆë‹¤.
**ë‹¨ì **
- ì½”ë“œê°€ ì•½ê°„ ë³µì¡í•´ì§ˆ ìˆ˜ ìˆë‹¤. Runnable ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì´ë¥¼ Thread ì— ì „ë‹¬í•˜ëŠ” ê³¼ì •ì´ ì¶”ê°€ëœë‹¤.

ì •ë¦¬í•˜ìë©´ Runnable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•˜ì. ìŠ¤ë ˆë“œì™€ ì‹¤í–‰í•  ì‘ì—…ì„ ëª…í™•íˆ ë¶„ë¦¬í•˜ê³ , ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ Thread í´ë˜ìŠ¤ë¥¼ 
ì§ì ‘ ìƒì†í•˜ëŠ” ë°©ì‹ë³´ë‹¤ ë” ìœ ì—°í•˜ê³  ìœ ì§€ë³´ìˆ˜ í•˜ê¸° ì‰¬ìš´ ì½”ë“œë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

## ë¡œê±° ë§Œë“¤ê¸°
í˜„ì¬ ì–´ë–¤ ìŠ¤ë ˆë“œê°€ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ”ì§€ ì¶œë ¥í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì´ ê¸´ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì€ ë„ˆë¬´ ë²ˆê±°ë¡­ë‹¤.
```
System.out.println(Thread.currentThread().getName() + ": run()");
```

ë‹¤ìŒ ì˜ˆì‹œì™€ ê°™ì´ ì‹¤í–‰í•˜ë©´, í˜„ì¬ ì‹œê°„, ìŠ¤ë ˆë“œ ì´ë¦„, ì¶œë ¥ ë‚´ìš©ë“±ì´ í•œë²ˆì— ë‚˜ì˜¤ëŠ” í¸ë¦¬í•œ ê¸°ëŠ¥ì„ ë§Œë“¤ì–´ë³´ì.
```
log("hello thread");
log(123);
```

#### ì‹¤í–‰ ê²°ê³¼
```
15:39:02.000 [ main] hello thread
15:39:02.002 [ main] 123
```

```
package util;

import java.time.LocalTime;
import java.time.format.DateTimeFormatter;

public abstract class MyLogger {
    private static final DateTimeFormatter formatter =
            DateTimeFormatter.ofPattern("HH:mm:ss.SSS");

    public static void log(Object obj) {
        String time = LocalTime.now().format(formatter);
        System.out.printf("%s [%9s] %s\n", time,
                Thread.currentThread().getName(), obj);
    }
}
```
- util ì´ë¼ëŠ” íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í–ˆë‹¤. í”„ë¡œì íŠ¸ ì „ë°˜ì— ì‚¬ìš©ë˜ëŠ” ìœ í‹¸ë¦¬í‹°ë¼ëŠ” ëœ»ì´ë‹¤.
- í˜„ì¬ ì‹œê°„ì„ ì›í•˜ëŠ” í¬ë©§ìœ¼ë¡œ ì¶œë ¥í•˜ê¸° ìœ„í•´ DateTimeFormatter ë¥¼ ì‚¬ìš©í•œë‹¤.
- printf ì—ì„œ %s ëŠ” ë¬¸ìì—´ì„ ëœ»í•œë‹¤. ì¸ìë¥¼ ìˆœì„œëŒ€ë¡œ ì‚¬ìš©í•œë‹¤. ì—¬ê¸°ì„œëŠ” í˜„ì¬ ì‹œê°„, ìŠ¤ë ˆë“œ ì´ë¦„, ì¶œë ¥í•  ê°ì²´ ìˆœì„œì´ë‹¤.
  - ì°¸ê³ ë¡œ ë§ˆì§€ë§‰ì˜ ì¶œë ¥í•  ê°ì²´ëŠ” ë¬¸ìì—´ì´ ì•„ë‹ˆë¼ Object íƒ€ì…ì¸ë°, %s ë¥¼ ì‚¬ìš©í•˜ë©´ toString() ì„ ì‚¬ìš©í•´ì„œ ë¬¸ìì—´ë¡œ ë³€í™˜ í›„ ì¶œë ¥í•œë‹¤. 
    ì´ë ‡ê²Œ Object íƒ€ì…ì„ ì‚¬ìš©í•˜ë©´ ë¬¸ìì—´ ë¿ë§Œ ì•„ë‹ˆë¼ ê°ì²´ë„ ì¶œë ¥í•  ìˆ˜ ìˆë‹¤.
- %9s ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë¬¸ìë¥¼ ì¶œë ¥í•  ë•Œ 9ì¹¸ì„ í™•ë³´í•œë‹¤ëŠ” ëœ»ì´ë‹¤. 9ì¹¸ì´ ì°¨ì§€ ì•Šìœ¼ë©´ ì™¼ìª½ì— ê·¸ ë§Œí¼ ë¹„ì›Œë‘”ë‹¤. ì´ ê¸°ëŠ¥ì€ ë‹¨ìˆœíˆ ì¶œë ¥ì‹œ ì •ë ¬ì„ ê¹”ë”í•˜ê²Œ
  í•˜ë ¤ê³  ì‚¬ìš©í•œë‹¤.
  - ì˜ˆ)
    - [ main] : ì•ì— 5ì¹¸ ê³µë°±
    - [ Thread-0] : ì•ì— 1ì¹¸ ê³µë°±

```
package util;

import static util.MyLogger.log;

public class MyLoggerMain {
    public static void main(String[] args) {
        log("hello thread");
        log(123);
    }
}
```
- ì‚¬ìš©í•  ë•ŒëŠ” ì§€ê¸ˆê³¼ ê°™ì´ import static ì„ ì‚¬ìš©í•˜ë©´ ë©”ì„œë“œ ì´ë¦„ë§Œìœ¼ë¡œ ê°„ë‹¨íˆ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

#### ì‹¤í–‰ ê²°ê³¼
```
15:39:02.000 [ main] hello thread
15:39:02.002 [ main] 123
```
ìŠ¤ë ˆë“œë¥¼ í•™ìŠµí•  ë•ŒëŠ” ìŠ¤ë ˆë“œ ì´ë¦„, ê·¸ë¦¬ê³  í•´ë‹¹ ìŠ¤ë ˆë“œê°€ ì–¸ì œ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.
ì•ìœ¼ë¡œëŠ” System.out.println() ëŒ€ì‹ ì— ìŠ¤ë ˆë“œ ì´ë¦„ê³¼ ì‹¤í–‰ ì‹œê°„ì„ ì•Œë ¤ì£¼ëŠ” MyLogger ë¥¼ ì‚¬ìš©í•˜ê² ë‹¤.

## ì—¬ëŸ¬ ìŠ¤ë ˆë“œ ë§Œë“¤ê¸°
ì´ë²ˆì—ëŠ” ë§ì€ ìŠ¤ë ˆë“œë¥¼ ì–´ë–»ê²Œ í•œ ë²ˆì— ë§Œë“œëŠ”ì§€ ì•Œì•„ë³´ì.

ë‹¨ìˆœíˆ ìŠ¤ë ˆë“œ 3ê°œë¥¼ ìƒì„±í•˜ê³  ì‹¤í–‰í•´ë³´ì.
```
package thread.start;

import static util.MyLogger.*;

public class ManyThreadMainV1 {
    public static void main(String[] args) {
        log("main() start");

        HelloRunnable runnable = new HelloRunnable();

        Thread thread1 = new Thread(runnable);
        thread1.start();

        Thread thread2 = new Thread(runnable);
        thread2.start();

        Thread thread3 = new Thread(runnable);
        thread3.start();

        log("main() end");
    }
}
```

#### ì‹¤í–‰ ê²°ê³¼
```
15:52:34.602 [ main] main() start
15:52:34.604 [ main] main() end
Thread-2: run()
Thread-1: run()
Thread-0: run()
```
- ì‹¤í–‰ ê²°ê³¼ëŠ” ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤. ìŠ¤ë ˆë“œì˜ ì‹¤í–‰ ìˆœì„œëŠ” ë³´ì¥ë˜ì§€ ì•ŠëŠ”ë‹¤.

![](https://github.com/dididiri1/TIL/blob/main/Java/adv1/images/02_07.png?raw=true)
- ìŠ¤ë ˆë“œ3ê°œë¥¼ ìƒì„±í•  ë•Œ ëª¨ë‘ ê°™ì€ HelloRunnable ì¸ìŠ¤í„´ìŠ¤( x001 )ë¥¼ ìŠ¤ë ˆë“œì˜ ì‹¤í–‰ ì‘ì—…ìœ¼ë¡œ ì „ë‹¬í–ˆë‹¤.
- Thread-0 , Thread-1 , Thread-2 ëŠ” ëª¨ë‘ HelloRunnable ì¸ìŠ¤í„´ìŠ¤ì— ìˆëŠ” run() ë©”ì„œë“œë¥¼ ì‹¤í–‰í•œë‹¤.

ìŠ¤ë ˆë“œ 100ê°œë¥¼ ìƒì„±í•˜ê³  ì‹¤í–‰í•´ë³´ì.
```
package thread.start;

import static util.MyLogger.log;

public class ManyThreadMainV2 {
    public static void main(String[] args) {
        log("main() start");

        HelloRunnable runnable = new HelloRunnable();
        for (int i = 0; i < 100; i++) {
            Thread thread = new Thread(runnable);
            thread.start();
        }

        log("main() end");
    }
}
```
ë°˜ë³µë¬¸ì„ ì‚¬ìš©í•˜ë©´ ìŠ¤ë ˆë“œì˜ ìˆ«ìë¥¼ ìœ ë™ì ìœ¼ë¡œ ë³€ê²½í•˜ë©´ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.

#### ì‹¤í–‰ ê²°ê³¼
```
16:04:35.503 [ main] main() start
Thread-9: run()
Thread-5: run()
Thread-8: run()
Thread-3: run()
Thread-0: run()
Thread-1: run()
Thread-7: run()
Thread-4: run()
Thread-2: run()
Thread-6: run()
...
16:04:35.505 [ main] main() end
```
- ì‹¤í–‰ ê²°ê³¼ëŠ” ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤. ìŠ¤ë ˆë“œì˜ ì‹¤í–‰ ìˆœì„œëŠ” ë³´ì¥ë˜ì§€ ì•ŠëŠ”ë‹¤.

## Runnableì„ ë§Œë“œëŠ” ë‹¤ì–‘í•œ ë°©ë²•
ì¤‘ì²© í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ Runnable ì„ ë” í¸ë¦¬í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
(ì¤‘ì²© í´ë˜ìŠ¤ëŠ” ìë°” ì¤‘ê¸‰1í¸ ì°¸ê³ )

ì°¸ê³ ë¡œ ëª¨ë‘ ê²°ê³¼ëŠ” ê°™ë‹¤.

### ì •ì  ì¤‘ì²© í´ë˜ìŠ¤ ì‚¬ìš©
```
package thread.start;

import static util.MyLogger.log;

public class InnerRunnableMainV1 {
    public static void main(String[] args) {
        log("main() start");

        Runnable runnable = new MyRunnable();
        Thread thread = new Thread(runnable);
        thread.start();

        log("main() end");
    }

    static class MyRunnable implements Runnable {
        @Override
        public void run() {
            log("run()");
        }
    }
}
```
- íŠ¹ì • í´ë˜ìŠ¤ ì•ˆì—ì„œë§Œ ì‚¬ìš©ë˜ëŠ” ê²½ìš° ì´ë ‡ê²Œ ì¤‘ì²© í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

#### ì‹¤í–‰ ê²°ê³¼
```
16:09:54.882 [     main] main() start
16:09:54.884 [     main] main() end
16:09:54.884 [ Thread-0] run()
```

### ìµëª… í´ë˜ìŠ¤ ì‚¬ìš©
```
package thread.start;

import static util.MyLogger.log;

public class InnerRunnableMainV2 {
    public static void main(String[] args) {
        log("main() start");

        Runnable runnable = new Runnable() {
            @Override
            public void run() {
                log("run()");
            }
        };

        Thread thread = new Thread(runnable);
        thread.start();

        log("main() end");
    }
}
```
- íŠ¹ì • ë©”ì„œë“œ ì•ˆì—ì„œë§Œ ê°„ë‹¨íˆ ì •ì˜í•˜ê³  ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ ìµëª… í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

### ìµëª… í´ë˜ìŠ¤ ë³€ìˆ˜ ì—†ì´ ì§ì ‘ ì „ë‹¬
```
package thread.start;

import static util.MyLogger.log;

public class InnerRunnableMainV3 {
    public static void main(String[] args) {
        log("main() start");

        Thread thread = new Thread(new Runnable() {
            @Override
            public void run() {
                log("run()");
            }
        });
        thread.start();

        log("main() end");
    }
}
```

### ëŒë‹¤
```
package thread.start;

import static util.MyLogger.log;

public class InnerRunnableMainV4 {
    public static void main(String[] args) {
        log("main() start");

        // ëŒë‹¤ë¥¼ ë°°ìš°ë©´ ì´í•´
        Thread thread = new Thread(() -> log("run()"));
        thread.start();

        log("main() end");
    }
}
```
- ëŒë‹¤ë¥¼ ì‚¬ìš©í•˜ë©´ ë©”ì„œë“œ(í•¨ìˆ˜) ì½”ë“œ ì¡°ê°ì„ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.
- ìš°ë¦¬ëŠ” ì•„ì§ ëŒë‹¤ë¥¼ í•™ìŠµí•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ì •ì  ì¤‘ì²© í´ë˜ìŠ¤ë‚˜ ìµëª… í´ë˜ìŠ¤ë¥¼ ì£¼ë¡œ ì‚¬ìš©í•˜ê² ë‹¤.
- ì°¸ê³ ë¡œ ëŒë‹¤ëŠ” ë³„ë„ì˜ ê°•ì˜ì—ì„œ ë‹¤ë£° ì˜ˆì •ì´ë‹¤.

## ë¬¸ì œì™€ í’€ì´
### ë¬¸ì œ1: Thread ìƒì†
ë‹¤ìŒ ìš”êµ¬ì‚¬í•­ì— ë§ê²Œ ë©€í‹°ìŠ¤ë ˆë“œ í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•´ë¼.
1. Thread í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì€ CounterThread ë¼ëŠ” ìŠ¤ë ˆë“œ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì.
2. ì´ ìŠ¤ë ˆë“œëŠ” 1ë¶€í„° 5ê¹Œì§€ì˜ ìˆ«ìë¥¼ 1ì´ˆ ê°„ê²©ìœ¼ë¡œ ì¶œë ¥í•´ì•¼ í•œë‹¤. ì•ì„œ ìš°ë¦¬ê°€ ë§Œë“  log() ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ì„œ ì¶œë ¥í•´ë¼.
3. main() ë©”ì„œë“œì—ì„œ CounterThread ìŠ¤ë ˆë“œ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³  ì‹¤í–‰í•´ë¼.
4. ì‹¤í–‰ ê²°ê³¼ë¥¼ ì°¸ê³ í•˜ì.

#### ì‹¤í–‰ ê²°ê³¼
```
09:46:23.329 [ Thread-0] value: 1
09:46:24.332 [ Thread-0] value: 2
09:46:25.338 [ Thread-0] value: 3
09:46:26.343 [ Thread-0] value: 4
09:46:27.349 [ Thread-0] value: 5
```

```
package thread.start.test;

import static util.MyLogger.log;

public class StartTest1Main {
    // ì—¬ê¸°ì— ì½”ë“œ ì‘ì„±
}
```

#### ì •ë‹µ
```
package thread.start.test;

import static util.MyLogger.log;

public class StartTest1Main {
    public static void main(String[] args) {
        CounterThread thread = new CounterThread();
        thread.start();
    }

    static class CounterThread extends Thread {
        @Override
        public void run() {
            for (int i = 1; i <= 5; i++) {
                log("value: " + i);
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    throw new RuntimeException(e);
                }
            }
        }
    }
}
```

## ë¬¸ì œ 2: Runnable êµ¬í˜„
ë‹¤ìŒ ìš”êµ¬ì‚¬í•­ì— ë§ê²Œ ë©€í‹°ìŠ¤ë ˆë“œ í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•´ë¼.
1. CounterRunnable ì´ë¼ëŠ” ì´ë¦„ì˜ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì, ì´ í´ë˜ìŠ¤ëŠ” Runnable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì•¼ í•œë‹¤.
2. CounterRunnable ì€ 1ë¶€í„° 5ê¹Œì§€ì˜ ìˆ«ìë¥¼ 1ì´ˆ ê°„ê²©ìœ¼ë¡œ ì¶œë ¥í•´ì•¼ í•œë‹¤. ì•ì„œ ìš°ë¦¬ê°€ ë§Œë“  log() ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ì„œ ì¶œë ¥í•´ë¼.
3. main ë©”ì„œë“œì—ì„œ CounterRunnable ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì´ìš©í•´ì„œ Thread ë¥¼ ìƒì„±í•˜ê³  ì‹¤í–‰í•´ë¼.
4. ìŠ¤ë ˆë“œì˜ ì´ë¦„ì€ "counter"ë¡œ ì§€ì •í•´ì•¼ í•œë‹¤.

#### ì‹¤í–‰ ê²°ê³¼
```
09:53:36.705 [ counter] value: 1
09:53:37.713 [ counter] value: 2
09:53:38.719 [ counter] value: 3
09:53:39.725 [ counter] value: 4
09:53:40.726 [ counter] value: 5
```

```
package thread.start.test;

import static util.MyLogger.log;

public class StartTest2Main {
    // ì—¬ê¸°ì— ì½”ë“œ ì‘ì„±
}
```

#### ì •ë‹µ
```
package thread.start.test;

import static util.MyLogger.log;

public class StartTest2Main {
    public static void main(String[] args) {
        Thread thread = new Thread(new CounterRunnable(), "counter");
        thread.start();
    }

    static class CounterRunnable implements Runnable {
        @Override
        public void run() {
            for (int i = 1; i <= 5; i++) {
                log("value: " + i);
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }
    }
}
```

## ë¬¸ì œ 3: Runnable ìµëª… í´ë˜ìŠ¤ êµ¬í˜„
ë°©ê¸ˆ ì‘ì„±í•œ ë¬¸ì œ2ë¥¼ ìµëª… í´ë˜ìŠ¤ë¡œ êµ¬í˜„í•´ë¼.

#### ì •ë‹µ
```
package thread.start.test;

import static util.MyLogger.log;

public class StartTest3Main {
    public static void main(String[] args) {
        Runnable runnable = new Runnable() {
            @Override
            public void run() {
                for (int i = 1; i <= 5; i++) {
                    log("value: " + i);
                    try {
                        Thread.sleep(1000);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
            }
        };

        Thread thread = new Thread(runnable, "counter");
        thread.start();
    }
}
```

### ë¬¸ì œ 4: ì—¬ëŸ¬ ìŠ¤ë ˆë“œ ì‚¬ìš©
- Thread-A , Thread-B ë‘ ìŠ¤ë ˆë“œë¥¼ ë§Œë“¤ì–´ë¼
- Thread-A ëŠ” 1ì´ˆì— í•œ ë²ˆì”© "A"ë¥¼ ì¶œë ¥í•œë‹¤.
- Thread-B ëŠ” 0.5ì´ˆì— í•œ ë²ˆì”© "B"ë¥¼ ì¶œë ¥í•œë‹¤.
- ì´ í”„ë¡œê·¸ë¨ì€ ê°•ì œ ì¢…ë£Œí•  ë•Œ ê¹Œì§€ ê³„ì† ì‹¤í–‰ëœë‹¤.

#### ì‹¤í–‰ ê²°ê³¼
```
10:04:27.000 [ Thread-A] A
10:04:27.000 [ Thread-B] B
10:04:27.507 [ Thread-B] B
10:04:28.006 [ Thread-A] A
10:04:28.012 [ Thread-B] B
10:04:28.518 [ Thread-B] B
10:04:29.011 [ Thread-A] A
10:04:29.023 [ Thread-B] B
... ë¬´í•œ ì‹¤í–‰
```

#### ì •ë‹µ
```
package thread.start.test;

import static util.MyLogger.log;

public class StartTest4Main {
    public static void main(String[] args) {
        Thread threadA = new Thread(new PrintWork("A", 1000), "Thread-A");
        Thread threadB = new Thread(new PrintWork("B", 500), "Thread-B");

        threadA.start();
        threadB.start();
    }

    static class PrintWork implements Runnable {
        private String content;
        private int sleepMs;

        public PrintWork(String content, int sleepMs) {
            this.content = content;
            this.sleepMs = sleepMs;
        }

        @Override
        public void run() {
            while (true) { // ë¬´í•œ ë£¨í”„
                log(content);
                try {
                    Thread.sleep(sleepMs);
                } catch (InterruptedException e) {
                    throw new RuntimeException(e);
                }
            }
        }
    }
}
```




