# ì„¹ì…˜ 8. ë¼ì´í”„ì‚¬ì´í´

## 7.1) ë¼ì´í”„ì‚¬ì´í´ì´ë€?

![](https://github.com/dididiri1/TIL/blob/main/React/images/08_01.png?raw=true)


### Mount (Like. íƒ„ìƒ)
- ì»´í¬ë„ŒíŠ¸ê°€ íƒ„ìƒí•˜ëŠ” ìˆœê°„
- í™”ë©´ì— ì²˜ìŒ ë Œë”ë§ ë˜ëŠ” ìˆœê°„
> ì´ì œë¶€í„° "A" ì»´í¬ë„ŒíŠ¸ê°€ Mount ë˜ì—ˆë‹¤ë¼ê³  í•˜ë©´
> => A ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— ì²˜ìŒìœ¼ë¡œ ë Œë”ë§ ë˜ì—ˆë‹¤ëŠ” ëœ»ìœ¼ë¡œ ì´í•´í•˜ë©´ ë¨.

### Update (Like. ë³€í™˜)
- ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ë Œë”ë§ ë˜ëŠ” ìˆœê°„
- ë¦¬ë Œë”ë§ ë  ë•Œë¥¼ ì˜ë¯¸
> ê·¸ë˜ì„œ ì•ìœ¼ë¡œ "A ì»´í¬ë„ŒíŠ¸ê°€ ì—…ë°ì´íŠ¸ ë˜ì—ˆë‹¤" ë¼ëŠ” ë§ì€ ê³§
> => A ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ ë˜ì—ˆë‹¤ ë¼ëŠ” ëœ»ìœ¼ë¡œ ì´í•´í•˜ë©´ ë¨.


### UnMount (Like. ì£½ìŒ)
- ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì—ì„œ ì‚¬ë¼ì§€ëŠ” ìˆœê°„
- ë Œë”ë§ì—ì„œ ì œì™¸ ë˜ëŠ” ìˆœê°„ì„ ì˜ë¯¸)
> ê·¸ë˜ì„œ ì•ìœ¼ë¡œëŠ” "A ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ë˜ì—ˆë‹¤" ë¼ëŠ” ë§ì€
> => A ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì—ì„œ ì‚¬ë¼ì¡Œë‹¤. ë¼ëŠ” ëœ»ìœ¼ë¡œ ì´í•´í•˜ë©´ ë¨.

![](https://github.com/dididiri1/TIL/blob/main/React/images/08_02.png?raw=true)

![](https://github.com/dididiri1/TIL/blob/main/React/images/08_03.png?raw=true)

> ğŸ’¡ ì»´í¬ë„ŒíŠ¸ì˜ ë¼ì´í”Œ ì‚¬ì´í´ì˜ ë‹¨ê³„ë³„ë¡œ ìš°ë¦¬ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ê°ê° ë‹¤ë¥¸ ì‘ì—…ì„   
> ìˆ˜í–‰ë¼ë„ë¡ ë§Œë“œëŠ” ê²ƒì„ ë¼ì´í”Œ ì‚¬ì´í´ ì œì–´ë¼ê³  ë¶€ë¥¸ë‹¤. ì´ ë¼ì´í”„ ì‚¬ì´í´ ì œì–´ëŠ”  
> ìš°ë¦¬ê°€ ë‹¤ìŒ ì‹œê°„ì— ì‚´í´ë³¼ ë¦¬ì—‘íŠ¸ í›…ì¸ **uesEffectë¥¼** ì´ìš©í•˜ë©´ ì†ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

## 7.2) useEffect ì‚¬ìš©í•˜ê¸°
### ì‚¬ì´ë“œ ì´í™íŠ¸(SideEffect)ë€?
- ì‚¬ì´ë“œ ì´í™íŠ¸ëŠ” ìš°ë¦¬ë§ë¡œ "ë¶€ì‘ìš©"ì´ë¼ëŠ” ëœ»ì´ì§€ë§Œ
- ë¦¬ì—‘íŠ¸ì—ì„œëŠ” "ë¶€ìˆ˜ì ì¸ íš¨ê³¼", "íŒŒìƒë˜ëŠ” íš¨ê³¼"ì •ë„ë¡ í•´ì„ í• ìˆ˜ ìˆë‹¤.

![](https://github.com/dididiri1/TIL/blob/main/React/images/08_04.png?raw=true)


![](https://github.com/dididiri1/TIL/blob/main/React/images/08_05.png?raw=true)

 
![](https://github.com/dididiri1/TIL/blob/main/React/images/08_06.png?raw=true)


![](https://github.com/dididiri1/TIL/blob/main/React/images/08_07.png?raw=true)


> ğŸ’¡ UseEffectë¥¼ ì´ìš©í•˜ë©´ ì´ëŸ° ì»´í¬ë„ŒíŠ¸ì— ì–´ë– í•œ ê°’ì´ ë³€ê²½ë˜ì—ˆì„ ë•Œ íŠ¹ì • ì½”ë“œë¥¼ ì‹¤í–‰ì‹œí‚¤ê±°ë‚˜ ë˜ëŠ”  
> ì´ë ‡ê²Œ ë¼ì´í”„ì‚¬ì´í´ì„ ì œì–´í•˜ëŠ” ê²ƒ, ì¦‰ Mount, Update, Unmountë•Œ íŠ¹ì • ì½”ë“œë¥¼ ì‹¤í–‰ì‹œí‚¤ëŠ” ì´ëŸ¬í•œ  
> ê²ƒì„ ë§Œë“¤ ìˆ˜ ê°€ ìˆë‹¤.

```
import "./App.css";
import Viewer from "./components/Viewer";
import Controller from "./components/Controller";
import { useState, useEffect } from "react";

function App() {
  const [count, setCount] = useState(0);
  const [input, setInput] = useState("");

  useEffect(() => {
    console.log(`count: ${count} / input: ${input}`);
  }, [count, input]);
  // ì˜ì¡´ì„± ë°°ì—´
  // dependency array
  // deps

  const onClickButton = (value) => {
    setCount(count + value);
  };

  return (
    <div className="App">
      <h1>Simple Controller</h1>
      <section>
        <input
          value={input}
          onChange={(e) => {
            setInput(e.target.value);
          }}
        />
      </section>
      <section>
        <Viewer count={count} />
      </section>
      <section>
        <Controller onClickButton={onClickButton} />
      </section>
    </div>
  );
}

export default App;

```
![](https://github.com/dididiri1/TIL/blob/main/React/images/08_08.png?raw=true)



```
useEffect(() => {
    //console.log(`count: ${count} / input: ${input}`);
  }, [count, input]);
  // ì˜ì¡´ì„± ë°°ì—´
  // dependency array
  // deps

  const onClickButton = (value) => {
    setCount(count + value);
    console.log(count);
  };
```
![](https://github.com/dididiri1/TIL/blob/main/React/images/08_09.png?raw=true)

> ğŸ’¡ ì—¬ê¸°ì„œ onClickButton ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ setCountë¥¼ í˜¸ì¶œí•˜ê³  ë³€ê²½ëœ ê°’ì„ ì½˜ì†”ë¡œ ì¶œë ¥í•˜ë©´   
> ì•ˆëœë‹¤. ë³€ê²½ë˜ê¸° ì´ì „ì˜ ê°’ì„ ì½˜ìˆ ì— ì¶œë ¥í•˜ëŠ”ë° ê·¸ ì´ìœ ëŠ” setCount ìƒíƒœ ë³€í™˜ í•¨ìˆ˜ëŠ” ë¹„ë™ê¸°ë¡œ    
> ë™ì‘í•˜ê¸° ë–„ë¬¸ì´ë‹¤. ê·¸ë˜ì„œ ê²°ë¡ ì ìœ¼ë¡œ ë¦¬ì—‘íŠ¸ì˜ stateëŠ” ì´ë ‡ë“¯ ë¹„ê³µê¸°ë¡œ ì—…ë°ì´íŠ¸ê°€ ë˜ê¸° ë•Œë¬¸ì—  
> ë³€ê²½ëœ state ê°’ì„ ë°”ë¡œ ì‚¬ìš©í•´ì„œ ë¬´ì–¸ê°€ Side Effectì— í•´ë‹¹í•˜ëŠ” ë¶€ê°€ì ì¸ ì‘ì—…ì„ ì§„í–‰í•˜ë ¤ë©´  
> useEffectë¥¼ ì´ìš©í•´ì•¼ ëœë‹¤.

## 7.3) useEffectë¡œ ë¼ì´í”„ì‚¬ì´í´ ì œì–´í•˜ê¸°
### 1. ë§ˆìš´íŠ¸ : íƒ„ìƒ
- ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ ë˜ì—ˆì„ ë•Œ ë”± ìµœì´ˆë¡œ í•œë²ˆë§Œ ì‹¤í–‰ì‹œí‚¤ê³  ì‹¶ì€ ì½”ë“œê°€ ìˆì„ë•Œ
- useEffectë¥¼ í˜¸ì¶œí•˜ê³  depsë¡œëŠ” ë¹ˆ ë°°ì—´ì„ ì „ë‹¬í•´ì£¼ë©´ ë¨.
```
useEffect(() => {
   console.log("mount");
}, []);
```

### 2. ì—…ë°ì´íŠ¸ : ë³€í™”, ë¦¬ë Œë”ë§
- ì½œë°± í•¨ìˆ˜ëŠ” ë§ˆì€íŠ¸ ë  ë•Œ í•œë²ˆ ì‹¤í–‰ëœ ë‹¤ìŒì— ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ ë ë•Œë§ˆë‹¤ ê³„ì† ì‹¤í–‰ì´ ë¨
```
useEffect(() => {
    console.log("update");
  });
```
- ì—…ë°ì´íŠ¸ê°€ ë˜ëŠ” ìˆœê°„ì—ë§Œ ì½œë°± í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ê³  ì‹¶ë‹¤ë©´?
- ì²´í¬í•˜ëŠ” ë³€ìˆ˜ useRef ì‚¬ìš©í•œë‹¤.
```
import { useState, useEffect, useRef } from "react";
  
  const isMount = useRef(false);

  useEffect(() => {
    if (!isMount.current) {
      isMount.current = true;
      return;
    }

    console.log("update");
  });
```
### 3. ì–¸ë§ˆìš´íŠ¸ : ì£½ìŒ
```
import { useEffect } from "react";

const Even = () => {
  useEffect(() => {
    // í´ë¦°ì—…, ì •ë¦¬í•¨ìˆ˜
    return () => {
      console.log("unmount");
    };
  }, []);

  return <div>ì§ìˆ˜ì…ë‹ˆë‹¤.</div>;
};

export default Even;

```

#### ì „ì²´ ì½”ë“œ
```
import "./App.css";
import Viewer from "./components/Viewer";
import Controller from "./components/Controller";
import { useState, useEffect, useRef } from "react";
import Even from "./components/Even";

function App() {
  const [count, setCount] = useState(0);
  const [input, setInput] = useState("");

  const isMount = useRef(false);

  // 1. ë§ˆìš´íŠ¸ : íƒ„ìƒ
  useEffect(() => {
    console.log("mount");
  }, []);

  // 2. ì—…ë°ì´íŠ¸ : ë³€í™”, ë¦¬ëœë”ë§
  useEffect(() => {
    if (!isMount.current) {
      isMount.current = true;
      return;
    }

    console.log("update");
  });

  const onClickButton = (value) => {
    setCount(count + value);
    console.log(count);
  };

  return (
    <div className="App">
      <h1>Simple Controller</h1>
      <section>
        <input
          value={input}
          onChange={(e) => {
            setInput(e.target.value);
          }}
        />
      </section>
      <section>
        <Viewer count={count} />
        {count % 2 === 0 ? <Even /> : null}
      </section>
      <section>
        <Controller onClickButton={onClickButton} />
      </section>
    </div>
  );
}

export default App;
```

## 7.4) React ê°œë°œì ë„êµ¬ ì‚¬ìš©í•˜ê¸°

* [React ê°œë°œì ë„êµ¬ ë‹¤ìš´ë¡œë“œ ë§í¬](https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=ko)

![](https://github.com/dididiri1/TIL/blob/main/React/images/08_10.png?raw=true)

### Reference
* [í•œ ì… í¬ê¸°ë¡œ ì˜ë¼ ë¨¹ëŠ” ë¦¬ì•¡íŠ¸(React.js) : ê¸°ì´ˆë¶€í„° ì‹¤ì „ê¹Œì§€](https://inf.run/FiFhg)

