# 섹션 11 유틸리티 타입

## 유틸리티 타입 소개

### 유틸리티 타입이란
유틸리티 타입이란 타입스크립트가 자체적으로 제공하는 특수한 타입이다. 우리가 지금까지 배웠던 제네릭  
,먑드 타입, 조건부 타입 등의 타입 조작 기능을 이용해 실무에서 자주 사용되는 유용한 타입들을 모아  
놓은 것을 의미한다.  

예를 들어 다음과 같이 Readonly<T>와 같은 유틸리티 타입을 이용해 특정 객체 타입의 모든 프로퍼티를  
읽기 전용 프로퍼티로 변환할 수 있다.
```
interface Person {
  name : string;
  age : number;
}

const person : Readonly<Person> ={
  name : "이정환",
  age : 27
}

person.name = ''
// ❌ name은 Readonly 프로퍼티입니다.
```
다음과 같이 Partial<T> 유틸리티 타입을 이용해 특정 객체 타입의 모든 프로퍼티를 선택적 프로퍼티로 
변환하는 것도 가능하다.
```
interface Person {
  name: string;
  age: number;
}

const person: Partial<Person> = {
  name: "이정환",
};
```
이번 섹션에서는 가장 자주 활용되는 몇가지 핵심 유틸리티 타입만 추려서 알아볼 예정이다.

![](https://github.com/dididiri1/TIL/blob/main/Typescript/images/11_01.webp?raw=true)

단순히 유틸리티 타입들의 사용법만 알아보는데에 그치는게 아니라 지금까지 배운 타입스크립트 지식으로 
직접 유틸리티 타입을 구현해 보겠다. 그 결과 이제는 언어가 제공하는 기능을 이용하는 수준을 넘어, 우리
가 직접 다양한 기능을 조작하고 만들어보고 변형할 수 있는 수준급의 지식을 갖추게 될 것 이다.

## Partial, Required, Readonly

### Partial<T>
Partial은 부분적인 또는 일부분의 라는 뜻으로 특정 객체 타입의 모든 프로퍼티를 선택적 프로퍼티로 변환한다.
따러서 기존 객체 타입에 정의된 프로퍼티들 중 일부분만 사용할 수 있도록 도와주는 타입이다.

#### 동기부여
블로그 플랫폼의 일부를 직접 구현한다고 가정해 보겠습니다. 다음과 같이 게시글 하나를 표현하는 타입을 선언한다.
```
interface Post {
  title: string;
  tags: string[];
  content: string;
  thumbnailURL?: string;
}

const draft: Post = { // ❌ tags 프로퍼티가 없음
  title: "제목은 나중에 짓자...",
  content: "초안...",
};
```
위와 같이 게시글의 일부 정보가 아직 설정되어 있지 않은 임시 저장 게시글의 경우에도 변수에 저장할 수 있어야 하는데
해당 변수를 Post 타입으로 정의하면 오류가 발생하게 된다.

그렇다고 임시 저장 게시글 기능을 위해 Post 타입의 모든 프로퍼티를 선택적 프로퍼티로 설정하는 것도 곤란 하다.
작성이 완료되어 화면에 렌더링 될 게시글들은 이 모든 프로퍼티를 진짜 다 가지고 있어야 하기 때문이다.

#### Partial<T> 타입으로 문제 해결하기
Partial<T> 유틸리티 타입을 이용하면 좋다.
```
interface Post {
  title: string;
  tags: string[];
  content: string;
  thumbnailURL?: string;
}

const draft: Partial<Post> = {
  title: "제목 나중에 짓자",
  content: "초안...",
};
```
Partial<T> 타입은 타입 변수 T로 전달한 객체 타입의 모든 프로퍼티를 다 선택적 프로퍼티로 변환한다. 따라서
Partial<Post> 타입은 모든 프로퍼티가 선택적 프로퍼티가 된 Post 타입과 같다.

#### Partial<T> 구현하기
번에는 Partial<T> 유틸리티 타입을 직접 구현해 보겠다.
```
type Partial<T> = {
  [key in keyof T]?: T[key];
};
```
하나의 타입 변수 T를 사용하는 제네릭 타입이다. 다음으로는 T에 할당된 객체 타입의 모든 프로퍼티를 선택적 
프로퍼티로 바꿔줘야 한다. 기존 객체 타입을 다른 타입으로 변환하는 타입은 맵드 타입이었다. 따라서 맵드 타입을 
이용해 다음과 같이 수정한다.

### Required<T>
Required는 우리말로 필수의, 필수적인 이라는 뜻으로 특정 객체 타입의 모든 프로퍼티를 필수(선택적이지 않은)
프로퍼티로 변환한다.

#### 동기부여
이번에는 썸네일이 반드시 있어야 하는 게시글이 하나 필요하다고 가정하겠다.
```
interface Post {
  title: string;
  tags: string[];
  content: string;
  thumbnailURL?: string;
}

(...)

// 반드시 썸네일 프로퍼티가 존재해야 하는 게시글
const withThumbnailPost: Post = {
  title: "한입 타스 후기",
  tags: ["ts"],
  content: "",
  thumbnailURL: "https://...",
};
```
withThumbnailPost는 모종의 이유(마케팅 등)로 반드시 썸네일이 포함된 게시글이어야 한다. 그런데 Post 타입의
thumbanilURL 프로퍼티가 현재 선택적 프로퍼티로 설정되어 있기 때문에 다음과 같이 실수로 주석 처리하거나 삭제
한다고 해도 타입 오류가 발생하지 않는다.
우리가 원하는 것은 이 변수에 한정해 thumbnailURL을 필수 프로퍼티로 만들어 주고 싶다.

#### Required<T> 타입으로 문제 해결하기
```
interface Post {
  title: string;
  tags: string[];
  content: string;
  thumbnailURL?: string;
}

(...)

const withThumbnailPost: Required<Post> = { // ❌
  title: "한입 타스 후기",
  tags: ["ts"],
  content: "",
  // thumbnailURL: "https://...",
};
```
Required<Post>는 Post 타입의 모든 프로퍼티가 필수 프로퍼티로 변환된 객체 타입이다. 따라서 위 코드 처럼
thumbnailURL 프로퍼티를 생략하면 오류가 발상하게 된다.

#### Required<T> 타입 구현하기
든 프로퍼티를 필수 프로퍼티로 만든다는 말은 반대로 바꿔보면 모든 프로퍼티에서 ‘선택적’ 이라는 기능을 제거하는
것 과 같다. 따라서 다음과 같이 -?를 프로퍼티 이름 뒤에 붙여주면 된다.
```
type Required<T> = {
  [key in keyof T]-?: T[key];
};
```
-? 는 ?가 붙어있는 선택적 프로퍼티가 있으면 ?를 제거하라는 의미이다.

### Readonly
Readonly는 우리말로 읽기 전용 이라는 뜻으로 특정 객체 타입의 모든 프로퍼티를 읽기 전용 프로퍼티로 변환한다.

#### 동기부여
이번에는 앞서 만들던 예제에 이어서 절대 내부를 수정할 수 없는 보호된 게시글이 하나 필요하다고 가정하겠다.
```
interface Post {
  title: string;
  tags: string[];
  content: string;
  thumbnailURL?: string;
}

const readonlyPost: Post = {
  title: "보호된 게시글 입니다.",
  tags: [],
  content: "",
};

readonlyPost.content = "수정하기!";
```
변수 readonlyPost는 보호받아야 하는 게시글로 절대 객체 내부의 값을 수정하지 못하게 막아야 한다고 가정 했다.
그러나 Post 타입의 모든 프로퍼티가 다 readonly 설정이 안되어 있기 때문에 지금은 수정을 방지 하지 못한다.

#### Readonly<T>로 문제 해결하기
이럴 때 바로 다음과 같이 Readonly<T> 유틸리티 타입을 이용하면 된다.
```
interface Post {
  title: string;
  tags: string[];
  content: string;
  thumbnailURL?: string;
}

const readonlyPost: Readonly<Post> = {
  title: "보호된 게시글 입니다.",
  tags: [],
  content: "",
};

readonlyPost.content = "수정하기!"; // ❌
```
Readonly<Post>는 Post 타입의 모든 프로퍼티를 readonly(읽기 전용) 프로퍼티로 변환된다. 따라서 점표기법을
이용해 특정 프로퍼티의 값을 수정하려고 하면 오류가 발생한다.

#### Readonly<T> 구현하기
Readonly<T>도 직접 구현해 보겠다. 
```
type Readonly<T> = {
  readonly [key in keyof T]: T[key];
};
```
